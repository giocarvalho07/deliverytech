2026-02-17 01:22:17.463 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2026-02-17 01:22:17.570 [restartedMain] INFO  c.d.d.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 18992 (C:\Users\giova\Downloads\TI ARQUITETURA DE SISTEMAS\deliverytech\delivery-api\target\classes started by giova in C:\Users\giova\Downloads\TI ARQUITETURA DE SISTEMAS\deliverytech\delivery-api)
2026-02-17 01:22:17.570 [restartedMain] DEBUG c.d.d.DeliveryApiApplication - Running with Spring Boot v3.3.4, Spring v6.1.13
2026-02-17 01:22:17.571 [restartedMain] INFO  c.d.d.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-17 01:22:17.687 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-02-17 01:22:17.688 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-02-17 01:22:19.757 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-17 01:22:19.892 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 124 ms. Found 6 JPA repository interfaces.
2026-02-17 01:22:21.573 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-17 01:22:21.589 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2026-02-17 01:22:21.595 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-17 01:22:21.596 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.30]
2026-02-17 01:22:21.692 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-17 01:22:21.693 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4004 ms
2026-02-17 01:22:21.989 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-17 01:22:22.300 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:deliverydb user=SA
2026-02-17 01:22:22.305 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-17 01:22:22.325 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2026-02-17 01:22:22.641 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-17 01:22:22.761 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2026-02-17 01:22:22.830 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-17 01:22:23.370 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-17 01:22:23.473 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-17 01:22:24.888 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-17 01:22:24.909 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists clientes cascade 
2026-02-17 01:22:24.912 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2026-02-17 01:22:24.912 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists pedidos cascade 
2026-02-17 01:22:24.913 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists produtos cascade 
2026-02-17 01:22:24.913 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists restaurantes cascade 
2026-02-17 01:22:24.913 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists usuarios cascade 
2026-02-17 01:22:24.918 [restartedMain] DEBUG org.hibernate.SQL - 
    create table clientes (
        ativo boolean not null,
        data_cadastro timestamp(6),
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        endereco varchar(255),
        nome varchar(255),
        telefone varchar(255),
        primary key (id)
    )
2026-02-17 01:22:24.929 [restartedMain] DEBUG org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2),
        quantidade integer,
        subtotal numeric(38,2),
        id bigint generated by default as identity,
        pedido_id bigint,
        produto_id bigint,
        primary key (id)
    )
2026-02-17 01:22:24.931 [restartedMain] DEBUG org.hibernate.SQL - 
    create table pedidos (
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint,
        endereco_entrega varchar(255),
        numero_pedido varchar(255),
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE'),
        primary key (id)
    )
2026-02-17 01:22:24.932 [restartedMain] DEBUG org.hibernate.SQL - 
    create table produtos (
        disponivel boolean,
        preco numeric(38,2),
        id bigint generated by default as identity,
        restaurante_id bigint,
        categoria varchar(255),
        descricao varchar(255),
        nome varchar(255),
        primary key (id)
    )
2026-02-17 01:22:24.934 [restartedMain] DEBUG org.hibernate.SQL - 
    create table restaurantes (
        ativo boolean,
        avaliacao numeric(38,2),
        taxa_entrega numeric(38,2),
        id bigint generated by default as identity,
        categoria varchar(255),
        endereco varchar(255),
        nome varchar(255),
        telefone varchar(255),
        primary key (id)
    )
2026-02-17 01:22:24.935 [restartedMain] DEBUG org.hibernate.SQL - 
    create table usuarios (
        ativo boolean,
        data_criacao timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(255) not null unique,
        nome varchar(255),
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE'),
        primary key (id)
    )
2026-02-17 01:22:24.936 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK42mycompce3b7yt3l6ukdwsxy 
       foreign key (pedido_id) 
       references pedidos
2026-02-17 01:22:24.949 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKxytdlekpdaobqphujy9bmuhl 
       foreign key (produto_id) 
       references produtos
2026-02-17 01:22:24.951 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists pedidos 
       add constraint FKg7202lk0hwxn04bmdl2thth5b 
       foreign key (cliente_id) 
       references clientes
2026-02-17 01:22:24.954 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists pedidos 
       add constraint FKf3mf88pcxawf3nt06400qmqn3 
       foreign key (restaurante_id) 
       references restaurantes
2026-02-17 01:22:24.955 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists produtos 
       add constraint FKsl3jhd8nhd103c5nm6yocnnkx 
       foreign key (restaurante_id) 
       references restaurantes
2026-02-17 01:22:24.962 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-17 01:22:25.667 [restartedMain] DEBUG c.d.d.config.SecurityFilter - Filter 'securityFilter' configured for use
2026-02-17 01:22:25.670 [restartedMain] DEBUG o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2026-02-17 01:22:25.807 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-17 01:22:27.337 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name autenticacaoService
2026-02-17 01:22:28.056 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 49 mappings in 'requestMappingHandlerMapping'
2026-02-17 01:22:28.312 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-02-17 01:22:28.673 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2026-02-17 01:22:29.037 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-02-17 01:22:29.110 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-02-17 01:22:29.635 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2026-02-17 01:22:29.734 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2026-02-17 01:22:29.765 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-17 01:22:29.784 [restartedMain] INFO  c.d.d.DeliveryApiApplication - Started DeliveryApiApplication in 13.219 seconds (process running for 14.198)
2026-02-17 01:22:30.030 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        clientes c1_0 
    where
        c1_0.ativo 
    fetch
        first ? rows only
2026-02-17 01:22:30.068 [restartedMain] INFO  c.d.delivery_api.config.DataLoader - --- INICIANDO CARGA DE DADOS ---
2026-02-17 01:22:30.084 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        clientes c1_0 
    where
        c1_0.email=?
2026-02-17 01:22:30.155 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        clientes
        (ativo, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2026-02-17 01:22:30.191 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        clientes c1_0 
    where
        c1_0.email=?
2026-02-17 01:22:30.193 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        clientes
        (ativo, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2026-02-17 01:22:30.199 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        restaurantes
        (ativo, avaliacao, categoria, endereco, nome, taxa_entrega, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2026-02-17 01:22:30.203 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        restaurantes
        (ativo, avaliacao, categoria, endereco, nome, taxa_entrega, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2026-02-17 01:22:30.205 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        restaurantes
        (ativo, avaliacao, categoria, endereco, nome, taxa_entrega, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2026-02-17 01:22:30.221 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        produtos
        (categoria, descricao, disponivel, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2026-02-17 01:22:30.227 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        produtos
        (categoria, descricao, disponivel, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2026-02-17 01:22:30.229 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        produtos
        (categoria, descricao, disponivel, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2026-02-17 01:22:30.230 [restartedMain] INFO  c.d.delivery_api.config.DataLoader - --- EXECUTANDO CENÁRIOS DE TESTE (CRIAÇÃO DE PEDIDOS) ---
2026-02-17 01:22:30.235 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        pedidos
        (cliente_id, data_pedido, endereco_entrega, numero_pedido, restaurante_id, status, taxa_entrega, valor_total, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2026-02-17 01:22:30.250 [restartedMain] INFO  c.d.delivery_api.config.DataLoader - Pedido 1 criado: Número 806E6CFD, Total R$ 40.9
2026-02-17 01:22:30.253 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        pedidos
        (cliente_id, data_pedido, endereco_entrega, numero_pedido, restaurante_id, status, taxa_entrega, valor_total, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2026-02-17 01:22:30.256 [restartedMain] INFO  c.d.delivery_api.config.DataLoader - Pedido 2 criado: Número 50D0F869, Total R$ 53.9
2026-02-17 01:22:30.256 [restartedMain] INFO  c.d.delivery_api.config.DataLoader - --- CARGA E TESTES CONCLUÍDOS COM SUCESSO ---
2026-02-17 01:23:01.194 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-17 01:23:01.195 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-17 01:23:01.195 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2026-02-17 01:23:01.196 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2026-02-17 01:23:01.196 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2026-02-17 01:23:01.198 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5a172031
2026-02-17 01:23:01.199 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@299de52d
2026-02-17 01:23:01.200 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-02-17 01:23:01.200 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2026-02-17 01:23:01.309 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/register", parameters={}
2026-02-17 01:23:01.313 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery_api.controller.AuthController#register(RegisterRequestDTO)
2026-02-17 01:23:01.511 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery_api.dto.request.login.RegisterRequestDTO@7438f00]
2026-02-17 01:23:01.647 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuarios u1_0 
    where
        u1_0.email=?
2026-02-17 01:23:01.835 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - 
    insert 
    into
        usuarios
        (ativo, data_criacao, email, nome, restaurante_id, role, senha, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2026-02-17 01:23:01.883 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2026-02-17 01:23:01.890 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiSucessResponse(sucesso=true, mensagem=Usuário registrado com sucesso, dados=com.deliverytech.deli (truncated)...]
2026-02-17 01:23:01.918 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2026-02-17 01:23:05.006 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2026-02-17 01:23:05.006 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery_api.controller.AuthController#login(LoginRequestDTO)
2026-02-17 01:23:05.009 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery_api.dto.request.login.LoginRequestDTO@73b2a9ff]
2026-02-17 01:23:05.165 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuarios u1_0 
    where
        u1_0.email=?
2026-02-17 01:23:05.384 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2026-02-17 01:23:05.385 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiSucessResponse(sucesso=true, mensagem=Login realizado com sucesso, dados=com.deliverytech.deliver (truncated)...]
2026-02-17 01:23:05.391 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-17 01:23:13.293 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuarios u1_0 
    where
        u1_0.email=?
2026-02-17 01:23:13.298 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/actuator/prometheus", parameters={}
2026-02-17 01:23:13.304 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/octet-stream" to []
2026-02-17 01:23:14.421 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Found 'Content-Type:text/plain;version=0.0.4;charset=utf-8' in response
2026-02-17 01:23:14.440 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{35, 32, 72, 69, 76, 80, 32, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 95, 114, 101, 97, 1 (truncated)...]
2026-02-17 01:23:14.443 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-17 01:23:20.575 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuarios u1_0 
    where
        u1_0.email=?
2026-02-17 01:23:20.585 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/actuator/metrics/delivery_pedidos_total", parameters={}
2026-02-17 01:23:20.587 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/octet-stream" to []
2026-02-17 01:23:20.598 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/vnd.spring-boot.actuator.v3+json', given [*/*] and supported [application/vnd.spring-boot.actuator.v3+json, application/vnd.spring-boot.actuator.v2+json, application/json]
2026-02-17 01:23:20.601 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [org.springframework.boot.actuate.metrics.MetricsEndpoint$MetricDescriptor@71358f7a]
2026-02-17 01:23:20.619 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-17 01:23:27.540 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuarios u1_0 
    where
        u1_0.email=?
2026-02-17 01:23:27.546 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/actuator/metrics/delivery_usuarios_ativos_total", parameters={}
2026-02-17 01:23:27.548 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/octet-stream" to []
2026-02-17 01:23:27.551 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/vnd.spring-boot.actuator.v3+json', given [*/*] and supported [application/vnd.spring-boot.actuator.v3+json, application/vnd.spring-boot.actuator.v2+json, application/json]
2026-02-17 01:23:27.551 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [org.springframework.boot.actuate.metrics.MetricsEndpoint$MetricDescriptor@5486d3fb]
2026-02-17 01:23:27.553 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-17 01:23:59.787 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuarios u1_0 
    where
        u1_0.email=?
2026-02-17 01:23:59.794 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/clientes", parameters={}
2026-02-17 01:23:59.795 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery_api.controller.ClienteController#cadastrar(ClienteRequestDTO)
2026-02-17 01:23:59.809 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery_api.dto.request.ClienteRequestDTO@2a900f92]
2026-02-17 01:23:59.835 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        clientes c1_0 
    where
        c1_0.email=?
2026-02-17 01:23:59.837 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    insert 
    into
        clientes
        (ativo, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2026-02-17 01:23:59.860 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2026-02-17 01:23:59.861 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiSucessResponse(sucesso=true, mensagem=Cliente cadastrado com sucesso, dados=com.deliverytech.deli (truncated)...]
2026-02-17 01:23:59.866 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2026-02-17 01:24:52.896 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuarios u1_0 
    where
        u1_0.email=?
2026-02-17 01:24:52.903 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/clientes?page=0&size=10", parameters={masked}
2026-02-17 01:24:52.904 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery_api.controller.ClienteController#listarAtivos(Pageable)
2026-02-17 01:24:52.928 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        clientes c1_0 
    where
        c1_0.ativo 
    fetch
        first ? rows only
2026-02-17 01:24:52.955 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2026-02-17 01:24:52.963 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiSucessResponse(sucesso=true, mensagem=Página de clientes recuperada, dados=PagedResponse(conteudo (truncated)...]
2026-02-17 01:24:52.973 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-17 01:29:16.696 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-17 01:29:16.779 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists clientes cascade 
2026-02-17 01:29:16.840 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2026-02-17 01:29:16.843 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists pedidos cascade 
2026-02-17 01:29:16.845 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists produtos cascade 
2026-02-17 01:29:16.846 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists restaurantes cascade 
2026-02-17 01:29:16.846 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists usuarios cascade 
2026-02-17 01:29:17.077 [SpringApplicationShutdownHook] WARN  o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2026-02-17 01:29:17.080 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-17 01:29:17.127 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-17 01:36:09.194 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2026-02-17 01:36:09.274 [restartedMain] INFO  c.d.d.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 16752 (C:\Users\giova\Downloads\TI ARQUITETURA DE SISTEMAS\deliverytech\delivery-api\target\classes started by giova in C:\Users\giova\Downloads\TI ARQUITETURA DE SISTEMAS\deliverytech\delivery-api)
2026-02-17 01:36:09.274 [restartedMain] DEBUG c.d.d.DeliveryApiApplication - Running with Spring Boot v3.3.4, Spring v6.1.13
2026-02-17 01:36:09.276 [restartedMain] INFO  c.d.d.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-17 01:36:09.396 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-02-17 01:36:09.396 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-02-17 01:36:11.494 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-17 01:36:11.618 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 113 ms. Found 6 JPA repository interfaces.
2026-02-17 01:36:13.441 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-17 01:36:13.459 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2026-02-17 01:36:13.466 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-17 01:36:13.466 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.30]
2026-02-17 01:36:13.547 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-17 01:36:13.548 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4150 ms
2026-02-17 01:36:13.821 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-17 01:36:14.113 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:deliverydb user=SA
2026-02-17 01:36:14.115 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-17 01:36:14.132 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2026-02-17 01:36:14.524 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-17 01:36:14.817 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2026-02-17 01:36:15.015 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-17 01:36:15.702 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-17 01:36:15.792 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-17 01:36:17.027 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-17 01:36:17.039 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists clientes cascade 
2026-02-17 01:36:17.042 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2026-02-17 01:36:17.043 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists pedidos cascade 
2026-02-17 01:36:17.043 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists produtos cascade 
2026-02-17 01:36:17.043 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists restaurantes cascade 
2026-02-17 01:36:17.043 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists usuarios cascade 
2026-02-17 01:36:17.049 [restartedMain] DEBUG org.hibernate.SQL - 
    create table clientes (
        ativo boolean not null,
        data_cadastro timestamp(6),
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        endereco varchar(255),
        nome varchar(255),
        telefone varchar(255),
        primary key (id)
    )
2026-02-17 01:36:17.057 [restartedMain] DEBUG org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2),
        quantidade integer,
        subtotal numeric(38,2),
        id bigint generated by default as identity,
        pedido_id bigint,
        produto_id bigint,
        primary key (id)
    )
2026-02-17 01:36:17.058 [restartedMain] DEBUG org.hibernate.SQL - 
    create table pedidos (
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint,
        endereco_entrega varchar(255),
        numero_pedido varchar(255),
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE'),
        primary key (id)
    )
2026-02-17 01:36:17.060 [restartedMain] DEBUG org.hibernate.SQL - 
    create table produtos (
        disponivel boolean,
        preco numeric(38,2),
        id bigint generated by default as identity,
        restaurante_id bigint,
        categoria varchar(255),
        descricao varchar(255),
        nome varchar(255),
        primary key (id)
    )
2026-02-17 01:36:17.061 [restartedMain] DEBUG org.hibernate.SQL - 
    create table restaurantes (
        ativo boolean,
        avaliacao numeric(38,2),
        taxa_entrega numeric(38,2),
        id bigint generated by default as identity,
        categoria varchar(255),
        endereco varchar(255),
        nome varchar(255),
        telefone varchar(255),
        primary key (id)
    )
2026-02-17 01:36:17.062 [restartedMain] DEBUG org.hibernate.SQL - 
    create table usuarios (
        ativo boolean,
        data_criacao timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(255) not null unique,
        nome varchar(255),
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE'),
        primary key (id)
    )
2026-02-17 01:36:17.063 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK42mycompce3b7yt3l6ukdwsxy 
       foreign key (pedido_id) 
       references pedidos
2026-02-17 01:36:17.073 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKxytdlekpdaobqphujy9bmuhl 
       foreign key (produto_id) 
       references produtos
2026-02-17 01:36:17.075 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists pedidos 
       add constraint FKg7202lk0hwxn04bmdl2thth5b 
       foreign key (cliente_id) 
       references clientes
2026-02-17 01:36:17.076 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists pedidos 
       add constraint FKf3mf88pcxawf3nt06400qmqn3 
       foreign key (restaurante_id) 
       references restaurantes
2026-02-17 01:36:17.077 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists produtos 
       add constraint FKsl3jhd8nhd103c5nm6yocnnkx 
       foreign key (restaurante_id) 
       references restaurantes
2026-02-17 01:36:17.081 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-17 01:36:17.621 [restartedMain] DEBUG c.d.d.config.SecurityFilter - Filter 'securityFilter' configured for use
2026-02-17 01:36:17.623 [restartedMain] DEBUG o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2026-02-17 01:36:17.719 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-17 01:36:19.170 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name autenticacaoService
2026-02-17 01:36:20.071 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 49 mappings in 'requestMappingHandlerMapping'
2026-02-17 01:36:20.314 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-02-17 01:36:20.578 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2026-02-17 01:36:20.924 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-02-17 01:36:20.983 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-02-17 01:36:21.452 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2026-02-17 01:36:21.543 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2026-02-17 01:36:21.571 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-17 01:36:21.592 [restartedMain] INFO  c.d.d.DeliveryApiApplication - Started DeliveryApiApplication in 13.24 seconds (process running for 14.539)
2026-02-17 01:36:21.785 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        clientes c1_0 
    where
        c1_0.ativo 
    fetch
        first ? rows only
2026-02-17 01:36:21.804 [restartedMain] INFO  c.d.delivery_api.config.DataLoader - --- INICIANDO CARGA DE DADOS ---
2026-02-17 01:36:21.813 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        clientes c1_0 
    where
        c1_0.email=?
2026-02-17 01:36:21.854 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        clientes
        (ativo, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2026-02-17 01:36:21.879 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        clientes c1_0 
    where
        c1_0.email=?
2026-02-17 01:36:21.880 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        clientes
        (ativo, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2026-02-17 01:36:21.884 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        restaurantes
        (ativo, avaliacao, categoria, endereco, nome, taxa_entrega, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2026-02-17 01:36:21.887 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        restaurantes
        (ativo, avaliacao, categoria, endereco, nome, taxa_entrega, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2026-02-17 01:36:21.888 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        restaurantes
        (ativo, avaliacao, categoria, endereco, nome, taxa_entrega, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2026-02-17 01:36:21.910 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        produtos
        (categoria, descricao, disponivel, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2026-02-17 01:36:21.914 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        produtos
        (categoria, descricao, disponivel, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2026-02-17 01:36:21.915 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        produtos
        (categoria, descricao, disponivel, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2026-02-17 01:36:21.916 [restartedMain] INFO  c.d.delivery_api.config.DataLoader - --- EXECUTANDO CENÁRIOS DE TESTE (CRIAÇÃO DE PEDIDOS) ---
2026-02-17 01:36:21.921 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        pedidos
        (cliente_id, data_pedido, endereco_entrega, numero_pedido, restaurante_id, status, taxa_entrega, valor_total, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2026-02-17 01:36:21.935 [restartedMain] INFO  c.d.delivery_api.config.DataLoader - Pedido 1 criado: Número AFEAEEB5, Total R$ 40.9
2026-02-17 01:36:21.938 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        pedidos
        (cliente_id, data_pedido, endereco_entrega, numero_pedido, restaurante_id, status, taxa_entrega, valor_total, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2026-02-17 01:36:21.940 [restartedMain] INFO  c.d.delivery_api.config.DataLoader - Pedido 2 criado: Número 64BACBAD, Total R$ 53.9
2026-02-17 01:36:21.940 [restartedMain] INFO  c.d.delivery_api.config.DataLoader - --- CARGA E TESTES CONCLUÍDOS COM SUCESSO ---
2026-02-17 01:43:27.133 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-17 01:43:27.192 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists clientes cascade 
2026-02-17 01:43:27.254 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2026-02-17 01:43:27.260 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists pedidos cascade 
2026-02-17 01:43:27.261 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists produtos cascade 
2026-02-17 01:43:27.262 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists restaurantes cascade 
2026-02-17 01:43:27.263 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists usuarios cascade 
2026-02-17 01:43:27.463 [SpringApplicationShutdownHook] WARN  o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2026-02-17 01:43:27.466 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-17 01:43:27.529 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-17 01:43:37.218 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.1.Final
2026-02-17 01:43:37.311 [restartedMain] INFO  c.d.d.DeliveryApiApplication - Starting DeliveryApiApplication using Java 21.0.9 with PID 19064 (C:\Users\giova\Downloads\TI ARQUITETURA DE SISTEMAS\deliverytech\delivery-api\target\classes started by giova in C:\Users\giova\Downloads\TI ARQUITETURA DE SISTEMAS\deliverytech\delivery-api)
2026-02-17 01:43:37.311 [restartedMain] DEBUG c.d.d.DeliveryApiApplication - Running with Spring Boot v3.3.4, Spring v6.1.13
2026-02-17 01:43:37.312 [restartedMain] INFO  c.d.d.DeliveryApiApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-17 01:43:37.400 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-02-17 01:43:37.401 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-02-17 01:43:40.647 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-17 01:43:40.873 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 198 ms. Found 6 JPA repository interfaces.
2026-02-17 01:43:43.966 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-17 01:43:43.998 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2026-02-17 01:43:44.009 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-17 01:43:44.010 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.30]
2026-02-17 01:43:44.167 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-17 01:43:44.168 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 6766 ms
2026-02-17 01:43:45.138 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-17 01:43:45.630 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:deliverydb user=SA
2026-02-17 01:43:45.632 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-17 01:43:45.647 [restartedMain] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:deliverydb'
2026-02-17 01:43:46.400 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-17 01:43:46.803 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2026-02-17 01:43:46.922 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-17 01:43:48.216 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-17 01:43:48.304 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-17 01:43:50.230 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-17 01:43:50.261 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists clientes cascade 
2026-02-17 01:43:50.266 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2026-02-17 01:43:50.266 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists pedidos cascade 
2026-02-17 01:43:50.267 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists produtos cascade 
2026-02-17 01:43:50.267 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists restaurantes cascade 
2026-02-17 01:43:50.267 [restartedMain] DEBUG org.hibernate.SQL - 
    drop table if exists usuarios cascade 
2026-02-17 01:43:50.277 [restartedMain] DEBUG org.hibernate.SQL - 
    create table clientes (
        ativo boolean not null,
        data_cadastro timestamp(6),
        id bigint generated by default as identity,
        email varchar(255) not null unique,
        endereco varchar(255),
        nome varchar(255),
        telefone varchar(255),
        primary key (id)
    )
2026-02-17 01:43:50.292 [restartedMain] DEBUG org.hibernate.SQL - 
    create table itens_pedido (
        preco_unitario numeric(38,2),
        quantidade integer,
        subtotal numeric(38,2),
        id bigint generated by default as identity,
        pedido_id bigint,
        produto_id bigint,
        primary key (id)
    )
2026-02-17 01:43:50.295 [restartedMain] DEBUG org.hibernate.SQL - 
    create table pedidos (
        taxa_entrega numeric(38,2),
        valor_total numeric(38,2),
        cliente_id bigint,
        data_pedido timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint,
        endereco_entrega varchar(255),
        numero_pedido varchar(255),
        status enum ('CANCELADO','CONFIRMADO','ENTREGUE','PENDENTE'),
        primary key (id)
    )
2026-02-17 01:43:50.299 [restartedMain] DEBUG org.hibernate.SQL - 
    create table produtos (
        disponivel boolean,
        preco numeric(38,2),
        id bigint generated by default as identity,
        restaurante_id bigint,
        categoria varchar(255),
        descricao varchar(255),
        nome varchar(255),
        primary key (id)
    )
2026-02-17 01:43:50.301 [restartedMain] DEBUG org.hibernate.SQL - 
    create table restaurantes (
        ativo boolean,
        avaliacao numeric(38,2),
        taxa_entrega numeric(38,2),
        id bigint generated by default as identity,
        categoria varchar(255),
        endereco varchar(255),
        nome varchar(255),
        telefone varchar(255),
        primary key (id)
    )
2026-02-17 01:43:50.305 [restartedMain] DEBUG org.hibernate.SQL - 
    create table usuarios (
        ativo boolean,
        data_criacao timestamp(6),
        id bigint generated by default as identity,
        restaurante_id bigint,
        email varchar(255) not null unique,
        nome varchar(255),
        senha varchar(255) not null,
        role enum ('ADMIN','CLIENTE','ENTREGADOR','RESTAURANTE'),
        primary key (id)
    )
2026-02-17 01:43:50.309 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FK42mycompce3b7yt3l6ukdwsxy 
       foreign key (pedido_id) 
       references pedidos
2026-02-17 01:43:50.325 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists itens_pedido 
       add constraint FKxytdlekpdaobqphujy9bmuhl 
       foreign key (produto_id) 
       references produtos
2026-02-17 01:43:50.327 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists pedidos 
       add constraint FKg7202lk0hwxn04bmdl2thth5b 
       foreign key (cliente_id) 
       references clientes
2026-02-17 01:43:50.330 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists pedidos 
       add constraint FKf3mf88pcxawf3nt06400qmqn3 
       foreign key (restaurante_id) 
       references restaurantes
2026-02-17 01:43:50.332 [restartedMain] DEBUG org.hibernate.SQL - 
    alter table if exists produtos 
       add constraint FKsl3jhd8nhd103c5nm6yocnnkx 
       foreign key (restaurante_id) 
       references restaurantes
2026-02-17 01:43:50.340 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-17 01:43:51.205 [restartedMain] DEBUG c.d.d.config.SecurityFilter - Filter 'securityFilter' configured for use
2026-02-17 01:43:51.208 [restartedMain] DEBUG o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2026-02-17 01:43:51.394 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-17 01:43:53.558 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name autenticacaoService
2026-02-17 01:43:54.549 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 49 mappings in 'requestMappingHandlerMapping'
2026-02-17 01:43:54.874 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2026-02-17 01:43:55.349 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 5 endpoints beneath base path '/actuator'
2026-02-17 01:43:56.107 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2026-02-17 01:43:56.256 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2026-02-17 01:43:56.944 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2026-02-17 01:43:57.063 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2026-02-17 01:43:57.104 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-17 01:43:57.129 [restartedMain] INFO  c.d.d.DeliveryApiApplication - Started DeliveryApiApplication in 20.906 seconds (process running for 21.843)
2026-02-17 01:43:57.459 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        clientes c1_0 
    where
        c1_0.ativo 
    fetch
        first ? rows only
2026-02-17 01:43:57.506 [restartedMain] INFO  c.d.delivery_api.config.DataLoader - --- INICIANDO CARGA DE DADOS ---
2026-02-17 01:43:57.524 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        clientes c1_0 
    where
        c1_0.email=?
2026-02-17 01:43:57.613 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        clientes
        (ativo, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2026-02-17 01:43:57.659 [restartedMain] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        clientes c1_0 
    where
        c1_0.email=?
2026-02-17 01:43:57.661 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        clientes
        (ativo, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2026-02-17 01:43:57.668 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        restaurantes
        (ativo, avaliacao, categoria, endereco, nome, taxa_entrega, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2026-02-17 01:43:57.677 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        restaurantes
        (ativo, avaliacao, categoria, endereco, nome, taxa_entrega, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2026-02-17 01:43:57.681 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        restaurantes
        (ativo, avaliacao, categoria, endereco, nome, taxa_entrega, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2026-02-17 01:43:57.706 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        produtos
        (categoria, descricao, disponivel, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2026-02-17 01:43:57.716 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        produtos
        (categoria, descricao, disponivel, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2026-02-17 01:43:57.722 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        produtos
        (categoria, descricao, disponivel, nome, preco, restaurante_id, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2026-02-17 01:43:57.724 [restartedMain] INFO  c.d.delivery_api.config.DataLoader - --- EXECUTANDO CENÁRIOS DE TESTE (CRIAÇÃO DE PEDIDOS) ---
2026-02-17 01:43:57.734 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        pedidos
        (cliente_id, data_pedido, endereco_entrega, numero_pedido, restaurante_id, status, taxa_entrega, valor_total, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2026-02-17 01:43:57.754 [restartedMain] INFO  c.d.delivery_api.config.DataLoader - Pedido 1 criado: Número 4DABC09E, Total R$ 40.9
2026-02-17 01:43:57.759 [restartedMain] DEBUG org.hibernate.SQL - 
    insert 
    into
        pedidos
        (cliente_id, data_pedido, endereco_entrega, numero_pedido, restaurante_id, status, taxa_entrega, valor_total, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, default)
2026-02-17 01:43:57.762 [restartedMain] INFO  c.d.delivery_api.config.DataLoader - Pedido 2 criado: Número 60777370, Total R$ 53.9
2026-02-17 01:43:57.762 [restartedMain] INFO  c.d.delivery_api.config.DataLoader - --- CARGA E TESTES CONCLUÍDOS COM SUCESSO ---
2026-02-17 01:44:09.734 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-17 01:44:09.735 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-17 01:44:09.736 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2026-02-17 01:44:09.736 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2026-02-17 01:44:09.736 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2026-02-17 01:44:09.738 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@316a2065
2026-02-17 01:44:09.739 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@76e287ca
2026-02-17 01:44:09.740 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2026-02-17 01:44:09.740 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2026-02-17 01:44:09.818 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/register", parameters={}
2026-02-17 01:44:09.820 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery_api.controller.AuthController#register(RegisterRequestDTO)
2026-02-17 01:44:09.822 [http-nio-8080-exec-2] INFO  c.d.d.config.LoggingInterceptor - ==> Início da Requisição: POST /api/auth/register | IP: 0:0:0:0:0:0:0:1
2026-02-17 01:44:09.933 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery_api.dto.request.login.RegisterRequestDTO@32f8c866]
2026-02-17 01:44:10.044 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuarios u1_0 
    where
        u1_0.email=?
2026-02-17 01:44:10.214 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - 
    insert 
    into
        usuarios
        (ativo, data_criacao, email, nome, restaurante_id, role, senha, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, default)
2026-02-17 01:44:10.256 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2026-02-17 01:44:10.265 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiSucessResponse(sucesso=true, mensagem=Usuário registrado com sucesso, dados=com.deliverytech.deli (truncated)...]
2026-02-17 01:44:10.297 [http-nio-8080-exec-2] INFO  c.d.d.config.LoggingInterceptor - <== Fim da Requisição: POST /api/auth/register | Status: 201 | Tempo: 475ms
2026-02-17 01:44:10.298 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2026-02-17 01:44:20.298 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/auth/login", parameters={}
2026-02-17 01:44:20.300 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery_api.controller.AuthController#login(LoginRequestDTO)
2026-02-17 01:44:20.301 [http-nio-8080-exec-3] INFO  c.d.d.config.LoggingInterceptor - ==> Início da Requisição: POST /api/auth/login | IP: 0:0:0:0:0:0:0:1
2026-02-17 01:44:20.304 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery_api.dto.request.login.LoginRequestDTO@bcc0981]
2026-02-17 01:44:20.501 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuarios u1_0 
    where
        u1_0.email=?
2026-02-17 01:44:20.670 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2026-02-17 01:44:20.670 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiSucessResponse(sucesso=true, mensagem=Login realizado com sucesso, dados=com.deliverytech.deliver (truncated)...]
2026-02-17 01:44:20.674 [http-nio-8080-exec-3] INFO  c.d.d.config.LoggingInterceptor - <== Fim da Requisição: POST /api/auth/login | Status: 200 | Tempo: 373ms
2026-02-17 01:44:20.674 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-17 01:44:51.715 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuarios u1_0 
    where
        u1_0.email=?
2026-02-17 01:44:51.721 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/actuator/prometheus", parameters={}
2026-02-17 01:44:51.723 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/octet-stream" to []
2026-02-17 01:44:52.729 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Found 'Content-Type:text/plain;version=0.0.4;charset=utf-8' in response
2026-02-17 01:44:52.745 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [{35, 32, 72, 69, 76, 80, 32, 97, 112, 112, 108, 105, 99, 97, 116, 105, 111, 110, 95, 114, 101, 97, 1 (truncated)...]
2026-02-17 01:44:52.749 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-17 01:45:11.353 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuarios u1_0 
    where
        u1_0.email=?
2026-02-17 01:45:11.363 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/actuator/metrics/delivery_pedidos_total", parameters={}
2026-02-17 01:45:11.365 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/octet-stream" to []
2026-02-17 01:45:11.374 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/vnd.spring-boot.actuator.v3+json', given [*/*] and supported [application/vnd.spring-boot.actuator.v3+json, application/vnd.spring-boot.actuator.v2+json, application/json]
2026-02-17 01:45:11.378 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [org.springframework.boot.actuate.metrics.MetricsEndpoint$MetricDescriptor@5a4bd772]
2026-02-17 01:45:11.392 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-17 01:45:19.653 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuarios u1_0 
    where
        u1_0.email=?
2026-02-17 01:45:19.663 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/actuator/metrics/delivery_usuarios_ativos_total", parameters={}
2026-02-17 01:45:19.665 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/octet-stream" to []
2026-02-17 01:45:19.668 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/vnd.spring-boot.actuator.v3+json', given [*/*] and supported [application/vnd.spring-boot.actuator.v3+json, application/vnd.spring-boot.actuator.v2+json, application/json]
2026-02-17 01:45:19.670 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [org.springframework.boot.actuate.metrics.MetricsEndpoint$MetricDescriptor@47fbaa89]
2026-02-17 01:45:19.675 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-17 01:45:23.739 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuarios u1_0 
    where
        u1_0.email=?
2026-02-17 01:45:23.746 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/clientes?page=0&size=10", parameters={masked}
2026-02-17 01:45:23.746 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery_api.controller.ClienteController#listarAtivos(Pageable)
2026-02-17 01:45:23.747 [http-nio-8080-exec-7] INFO  c.d.d.config.LoggingInterceptor - ==> Início da Requisição: GET /api/clientes | IP: 0:0:0:0:0:0:0:1
2026-02-17 01:45:23.758 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        clientes c1_0 
    where
        c1_0.ativo 
    fetch
        first ? rows only
2026-02-17 01:45:23.771 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2026-02-17 01:45:23.778 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiSucessResponse(sucesso=true, mensagem=Página de clientes recuperada, dados=PagedResponse(conteudo (truncated)...]
2026-02-17 01:45:23.789 [http-nio-8080-exec-7] INFO  c.d.d.config.LoggingInterceptor - <== Fim da Requisição: GET /api/clientes | Status: 200 | Tempo: 42ms
2026-02-17 01:45:23.790 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-17 01:45:32.831 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuarios u1_0 
    where
        u1_0.email=?
2026-02-17 01:45:32.834 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - POST "/api/clientes", parameters={}
2026-02-17 01:45:32.835 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery_api.controller.ClienteController#cadastrar(ClienteRequestDTO)
2026-02-17 01:45:32.835 [http-nio-8080-exec-9] INFO  c.d.d.config.LoggingInterceptor - ==> Início da Requisição: POST /api/clientes | IP: 0:0:0:0:0:0:0:1
2026-02-17 01:45:32.845 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Read "application/json;charset=UTF-8" to [com.deliverytech.delivery_api.dto.request.ClienteRequestDTO@3b4980ce]
2026-02-17 01:45:32.863 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        clientes c1_0 
    where
        c1_0.email=?
2026-02-17 01:45:32.866 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - 
    insert 
    into
        clientes
        (ativo, data_cadastro, email, endereco, nome, telefone, id) 
    values
        (?, ?, ?, ?, ?, ?, default)
2026-02-17 01:45:32.884 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2026-02-17 01:45:32.885 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiSucessResponse(sucesso=true, mensagem=Cliente cadastrado com sucesso, dados=com.deliverytech.deli (truncated)...]
2026-02-17 01:45:32.888 [http-nio-8080-exec-9] INFO  c.d.d.config.LoggingInterceptor - <== Fim da Requisição: POST /api/clientes | Status: 201 | Tempo: 53ms
2026-02-17 01:45:32.888 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 201 CREATED
2026-02-17 01:45:35.688 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        u1_0.id,
        u1_0.ativo,
        u1_0.data_criacao,
        u1_0.email,
        u1_0.nome,
        u1_0.restaurante_id,
        u1_0.role,
        u1_0.senha 
    from
        usuarios u1_0 
    where
        u1_0.email=?
2026-02-17 01:45:35.691 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/clientes?page=0&size=10", parameters={masked}
2026-02-17 01:45:35.692 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.deliverytech.delivery_api.controller.ClienteController#listarAtivos(Pageable)
2026-02-17 01:45:35.693 [http-nio-8080-exec-8] INFO  c.d.d.config.LoggingInterceptor - ==> Início da Requisição: GET /api/clientes | IP: 0:0:0:0:0:0:0:1
2026-02-17 01:45:35.697 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - 
    select
        c1_0.id,
        c1_0.ativo,
        c1_0.data_cadastro,
        c1_0.email,
        c1_0.endereco,
        c1_0.nome,
        c1_0.telefone 
    from
        clientes c1_0 
    where
        c1_0.ativo 
    fetch
        first ? rows only
2026-02-17 01:45:35.700 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [*/*] and supported [application/json, application/*+json]
2026-02-17 01:45:35.701 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [ApiSucessResponse(sucesso=true, mensagem=Página de clientes recuperada, dados=PagedResponse(conteudo (truncated)...]
2026-02-17 01:45:35.702 [http-nio-8080-exec-8] INFO  c.d.d.config.LoggingInterceptor - <== Fim da Requisição: GET /api/clientes | Status: 200 | Tempo: 9ms
2026-02-17 01:45:35.702 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2026-02-17 01:49:39.957 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-17 01:49:40.197 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists clientes cascade 
2026-02-17 01:49:40.335 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists itens_pedido cascade 
2026-02-17 01:49:40.336 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists pedidos cascade 
2026-02-17 01:49:40.338 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists produtos cascade 
2026-02-17 01:49:40.341 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists restaurantes cascade 
2026-02-17 01:49:40.341 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists usuarios cascade 
2026-02-17 01:49:40.566 [SpringApplicationShutdownHook] WARN  o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method failed on bean with name 'inMemoryDatabaseShutdownExecutor': org.h2.jdbc.JdbcSQLNonTransientConnectionException: Database is already closed (to disable automatic closing at VM shutdown, add ";DB_CLOSE_ON_EXIT=FALSE" to the db URL) [90121-224]
2026-02-17 01:49:40.569 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-17 01:49:40.619 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
